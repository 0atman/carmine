<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>taoensso.carmine.protocol documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Carmine 2.0.0-alpha1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="taoensso.carmine.html"><span>taoensso.carmine</span></a></li><li><a href="taoensso.carmine.commands.html"><span>taoensso.carmine.commands</span></a></li><li><a href="taoensso.carmine.connections.html"><span>taoensso.carmine.connections</span></a></li><li><a href="taoensso.carmine.locks.html"><span>taoensso.carmine.locks</span></a></li><li><a href="taoensso.carmine.message-queue.html"><span>taoensso.carmine.message-queue</span></a></li><li class="current"><a href="taoensso.carmine.protocol.html"><span>taoensso.carmine.protocol</span></a></li><li><a href="taoensso.carmine.ring.html"><span>taoensso.carmine.ring</span></a></li><li><a href="taoensso.carmine.tundra.html"><span>taoensso.carmine.tundra</span></a></li><li><a href="taoensso.carmine.utils.html"><span>taoensso.carmine.utils</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="taoensso.carmine.protocol.html#var--%3EContext"><span>-&gt;Context</span></a></li><li><a href="taoensso.carmine.protocol.html#var--%3EWrappedRaw"><span>-&gt;WrappedRaw</span></a></li><li><a href="taoensso.carmine.protocol.html#var-bytestring"><span>bytestring</span></a></li><li><a href="taoensso.carmine.protocol.html#var-get-basic-reply"><span>get-basic-reply</span></a></li><li><a href="taoensso.carmine.protocol.html#var-get-replies"><span>get-replies</span></a></li><li><a href="taoensso.carmine.protocol.html#var-map-%3EContext"><span>map-&gt;Context</span></a></li><li><a href="taoensso.carmine.protocol.html#var-map-%3EWrappedRaw"><span>map-&gt;WrappedRaw</span></a></li><li><a href="taoensso.carmine.protocol.html#var-raw"><span>raw</span></a></li><li><a href="taoensso.carmine.protocol.html#var-send-arg"><span>send-arg</span></a></li><li><a href="taoensso.carmine.protocol.html#var-send-request"><span>send-request</span></a></li><li><a href="taoensso.carmine.protocol.html#var-with-context"><span>with-context</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>taoensso.carmine.protocol documentation</h2><pre class="doc">Facilities for actually communicating with Redis server using its
request/response protocol. Originally adapted from Accession.

Ref: http://redis.io/topics/protocol</pre><div class="public" id="var--%3EContext"><h3>-&gt;Context</h3><div class="usage"><code>(-&gt;Context in-stream out-stream parser-queue)</code></div><pre class="doc">Positional factory function for class taoensso.carmine.protocol.Context.
</pre></div><div class="public" id="var--%3EWrappedRaw"><h3>-&gt;WrappedRaw</h3><div class="usage"><code>(-&gt;WrappedRaw ba)</code></div><pre class="doc">Positional factory function for class taoensso.carmine.protocol.WrappedRaw.
</pre></div><div class="public" id="var-bytestring"><h3>bytestring</h3><div class="usage"><code>(bytestring s)</code></div><pre class="doc">Redis communicates with clients using a (binary-safe) byte string protocol.
This is the equivalent of the byte array representation of a Java String.</pre></div><div class="public" id="var-get-basic-reply"><h3>get-basic-reply</h3><div class="usage"><code>(get-basic-reply in &amp; [raw?])</code></div><pre class="doc">BLOCKS to receive a single reply from Redis server. Applies basic parsing
and returns the result.

Redis will reply to commands with different kinds of replies, identified by
their first byte:
    * `+` for single line reply.
    * `-` for error message.
    * `:` for integer reply.
    * `$` for bulk reply.
    * `*` for multi bulk reply.</pre></div><div class="public" id="var-get-replies"><h3>get-replies</h3><div class="usage"><code>(get-replies &amp; [as-pipeline?])</code></div><pre class="doc">Implementation detail - don't use this.
BLOCKS to receive queued (pipelined) replies from Redis server. Applies all
parsing and returns the result. Note that Redis returns replies as a FIFO
queue per connection.</pre></div><div class="public" id="var-map-%3EContext"><h3>map-&gt;Context</h3><div class="usage"><code>(map-&gt;Context m__5665__auto__)</code></div><pre class="doc">Factory function for class taoensso.carmine.protocol.Context, taking a map of keywords to field values.
</pre></div><div class="public" id="var-map-%3EWrappedRaw"><h3>map-&gt;WrappedRaw</h3><div class="usage"><code>(map-&gt;WrappedRaw m__5665__auto__)</code></div><pre class="doc">Factory function for class taoensso.carmine.protocol.WrappedRaw, taking a map of keywords to field values.
</pre></div><div class="public" id="var-raw"><h3>raw</h3><div class="usage"><code>(raw x)</code></div><pre class="doc">Forces byte[] argument to be sent to Redis as raw, unencoded bytes.
</pre></div><div class="public" id="var-send-arg"><h3>send-arg</h3><div class="usage"><code>(send-arg out arg)</code></div><pre class="doc">Send arbitrary argument along with information about its size:
$&lt;size of arg&gt; crlf
&lt;arg data&gt;     crlf

Argument type will determine how it'll be stored with Redis:
  * String args become byte strings.
  * Simple numbers (integers, longs, floats, doubles) become byte strings.
  * Binary (byte array) args go through un-munged.
  * Everything else gets serialized.</pre></div><div class="public" id="var-send-request"><h3>send-request</h3><div class="usage"><code>(send-request args)</code></div><pre class="doc">Sends a command to Redis server using its byte string protocol:
*&lt;no. of args&gt;     crlf
[$&lt;size of arg N&gt;  crlf
  &lt;arg data&gt;       crlf ...]</pre></div><div class="public" id="var-with-context"><h3>with-context</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-context connection &amp; body)</code></div><pre class="doc">Evaluates body in the context of a thread-bound connection to a Redis server.
For non-listener connections, returns server's response.</pre></div></div></body></html>