<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Carmine 1.8.0 API documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Carmine 1.8.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="taoensso.carmine.html"><span>taoensso.carmine</span></a></li><li><a href="taoensso.carmine.commands.html"><span>taoensso.carmine.commands</span></a></li><li><a href="taoensso.carmine.connections.html"><span>taoensso.carmine.connections</span></a></li><li><a href="taoensso.carmine.locks.html"><span>taoensso.carmine.locks</span></a></li><li><a href="taoensso.carmine.message-queue.html"><span>taoensso.carmine.message-queue</span></a></li><li><a href="taoensso.carmine.protocol.html"><span>taoensso.carmine.protocol</span></a></li><li><a href="taoensso.carmine.ring.html"><span>taoensso.carmine.ring</span></a></li><li><a href="taoensso.carmine.utils.html"><span>taoensso.carmine.utils</span></a></li></ul></div><div class="namespace-index" id="content"><h2>Carmine 1.8.0 API documentation</h2><div class="doc">Clojure Redis client &amp; message queue</div><div class="namespace"><h3><a href="taoensso.carmine.html"><span>taoensso.carmine</span></a></h3><pre class="doc">Clojure Redis client &amp; message queue.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.html#var--%3EListener"><span>-&gt;Listener</span></a></li><li><a href="taoensso.carmine.html#var-append"><span>append</span></a></li><li><a href="taoensso.carmine.html#var-atomically"><span>atomically</span></a></li><li><a href="taoensso.carmine.html#var-auth"><span>auth</span></a></li><li><a href="taoensso.carmine.html#var-bgrewriteaof"><span>bgrewriteaof</span></a></li><li><a href="taoensso.carmine.html#var-bgsave"><span>bgsave</span></a></li><li><a href="taoensso.carmine.html#var-bitcount"><span>bitcount</span></a></li><li><a href="taoensso.carmine.html#var-bitop"><span>bitop</span></a></li><li><a href="taoensso.carmine.html#var-blpop"><span>blpop</span></a></li><li><a href="taoensso.carmine.html#var-brpop"><span>brpop</span></a></li><li><a href="taoensso.carmine.html#var-brpoplpush"><span>brpoplpush</span></a></li><li><a href="taoensso.carmine.html#var-client-kill"><span>client-kill</span></a></li><li><a href="taoensso.carmine.html#var-client-list"><span>client-list</span></a></li><li><a href="taoensso.carmine.html#var-config-get"><span>config-get</span></a></li><li><a href="taoensso.carmine.html#var-config-resetstat"><span>config-resetstat</span></a></li><li><a href="taoensso.carmine.html#var-config-set"><span>config-set</span></a></li><li><a href="taoensso.carmine.html#var-dbsize"><span>dbsize</span></a></li><li><a href="taoensso.carmine.html#var-debug-object"><span>debug-object</span></a></li><li><a href="taoensso.carmine.html#var-debug-segfault"><span>debug-segfault</span></a></li><li><a href="taoensso.carmine.html#var-decr"><span>decr</span></a></li><li><a href="taoensso.carmine.html#var-decrby"><span>decrby</span></a></li><li><a href="taoensso.carmine.html#var-del"><span>del</span></a></li><li><a href="taoensso.carmine.html#var-discard"><span>discard</span></a></li><li><a href="taoensso.carmine.html#var-dump"><span>dump</span></a></li><li><a href="taoensso.carmine.html#var-echo"><span>echo</span></a></li><li><a href="taoensso.carmine.html#var-eval"><span>eval</span></a></li><li><a href="taoensso.carmine.html#var-eval*"><span>eval*</span></a></li><li><a href="taoensso.carmine.html#var-evalsha"><span>evalsha</span></a></li><li><a href="taoensso.carmine.html#var-evalsha*"><span>evalsha*</span></a></li><li><a href="taoensso.carmine.html#var-exec"><span>exec</span></a></li><li><a href="taoensso.carmine.html#var-exists"><span>exists</span></a></li><li><a href="taoensso.carmine.html#var-expire"><span>expire</span></a></li><li><a href="taoensso.carmine.html#var-expireat"><span>expireat</span></a></li><li><a href="taoensso.carmine.html#var-flushall"><span>flushall</span></a></li><li><a href="taoensso.carmine.html#var-flushdb"><span>flushdb</span></a></li><li><a href="taoensso.carmine.html#var-get"><span>get</span></a></li><li><a href="taoensso.carmine.html#var-getbit"><span>getbit</span></a></li><li><a href="taoensso.carmine.html#var-getrange"><span>getrange</span></a></li><li><a href="taoensso.carmine.html#var-getset"><span>getset</span></a></li><li><a href="taoensso.carmine.html#var-hdel"><span>hdel</span></a></li><li><a href="taoensso.carmine.html#var-hexists"><span>hexists</span></a></li><li><a href="taoensso.carmine.html#var-hget"><span>hget</span></a></li><li><a href="taoensso.carmine.html#var-hgetall"><span>hgetall</span></a></li><li><a href="taoensso.carmine.html#var-hgetall*"><span>hgetall*</span></a></li><li><a href="taoensso.carmine.html#var-hincrby"><span>hincrby</span></a></li><li><a href="taoensso.carmine.html#var-hincrbyfloat"><span>hincrbyfloat</span></a></li><li><a href="taoensso.carmine.html#var-hkeys"><span>hkeys</span></a></li><li><a href="taoensso.carmine.html#var-hlen"><span>hlen</span></a></li><li><a href="taoensso.carmine.html#var-hmget"><span>hmget</span></a></li><li><a href="taoensso.carmine.html#var-hmset"><span>hmset</span></a></li><li><a href="taoensso.carmine.html#var-hset"><span>hset</span></a></li><li><a href="taoensso.carmine.html#var-hsetnx"><span>hsetnx</span></a></li><li><a href="taoensso.carmine.html#var-hvals"><span>hvals</span></a></li><li><a href="taoensso.carmine.html#var-incr"><span>incr</span></a></li><li><a href="taoensso.carmine.html#var-incrby"><span>incrby</span></a></li><li><a href="taoensso.carmine.html#var-incrbyfloat"><span>incrbyfloat</span></a></li><li><a href="taoensso.carmine.html#var-info"><span>info</span></a></li><li><a href="taoensso.carmine.html#var-info*"><span>info*</span></a></li><li><a href="taoensso.carmine.html#var-keys"><span>keys</span></a></li><li><a href="taoensso.carmine.html#var-kname"><span>kname</span></a></li><li><a href="taoensso.carmine.html#var-lastsave"><span>lastsave</span></a></li><li><a href="taoensso.carmine.html#var-lindex"><span>lindex</span></a></li><li><a href="taoensso.carmine.html#var-linsert"><span>linsert</span></a></li><li><a href="taoensso.carmine.html#var-llen"><span>llen</span></a></li><li><a href="taoensso.carmine.html#var-lpop"><span>lpop</span></a></li><li><a href="taoensso.carmine.html#var-lpush"><span>lpush</span></a></li><li><a href="taoensso.carmine.html#var-lpushx"><span>lpushx</span></a></li><li><a href="taoensso.carmine.html#var-lrange"><span>lrange</span></a></li><li><a href="taoensso.carmine.html#var-lrem"><span>lrem</span></a></li><li><a href="taoensso.carmine.html#var-lset"><span>lset</span></a></li><li><a href="taoensso.carmine.html#var-ltrim"><span>ltrim</span></a></li><li><a href="taoensso.carmine.html#var-lua-script"><span>lua-script</span></a></li><li><a href="taoensso.carmine.html#var-make-conn-pool"><span>make-conn-pool</span></a></li><li><a href="taoensso.carmine.html#var-make-keyfn"><span>make-keyfn</span></a></li><li><a href="taoensso.carmine.html#var-map-%3EListener"><span>map-&gt;Listener</span></a></li><li><a href="taoensso.carmine.html#var-mget"><span>mget</span></a></li><li><a href="taoensso.carmine.html#var-migrate"><span>migrate</span></a></li><li><a href="taoensso.carmine.html#var-monitor"><span>monitor</span></a></li><li><a href="taoensso.carmine.html#var-move"><span>move</span></a></li><li><a href="taoensso.carmine.html#var-mset"><span>mset</span></a></li><li><a href="taoensso.carmine.html#var-msetnx"><span>msetnx</span></a></li><li><a href="taoensso.carmine.html#var-multi"><span>multi</span></a></li><li><a href="taoensso.carmine.html#var-object"><span>object</span></a></li><li><a href="taoensso.carmine.html#var-persist"><span>persist</span></a></li><li><a href="taoensso.carmine.html#var-pexpire"><span>pexpire</span></a></li><li><a href="taoensso.carmine.html#var-pexpireat"><span>pexpireat</span></a></li><li><a href="taoensso.carmine.html#var-ping"><span>ping</span></a></li><li><a href="taoensso.carmine.html#var-preserve"><span>preserve</span></a></li><li><a href="taoensso.carmine.html#var-psetex"><span>psetex</span></a></li><li><a href="taoensso.carmine.html#var-psubscribe"><span>psubscribe</span></a></li><li><a href="taoensso.carmine.html#var-pttl"><span>pttl</span></a></li><li><a href="taoensso.carmine.html#var-publish"><span>publish</span></a></li><li><a href="taoensso.carmine.html#var-punsubscribe"><span>punsubscribe</span></a></li><li><a href="taoensso.carmine.html#var-quit"><span>quit</span></a></li><li><a href="taoensso.carmine.html#var-randomkey"><span>randomkey</span></a></li><li><a href="taoensso.carmine.html#var-remember"><span>remember</span></a></li><li><a href="taoensso.carmine.html#var-rename"><span>rename</span></a></li><li><a href="taoensso.carmine.html#var-renamenx"><span>renamenx</span></a></li><li><a href="taoensso.carmine.html#var-restore"><span>restore</span></a></li><li><a href="taoensso.carmine.html#var-return"><span>return</span></a></li><li><a href="taoensso.carmine.html#var-rpop"><span>rpop</span></a></li><li><a href="taoensso.carmine.html#var-rpoplpush"><span>rpoplpush</span></a></li><li><a href="taoensso.carmine.html#var-rpush"><span>rpush</span></a></li><li><a href="taoensso.carmine.html#var-rpushx"><span>rpushx</span></a></li><li><a href="taoensso.carmine.html#var-sadd"><span>sadd</span></a></li><li><a href="taoensso.carmine.html#var-save"><span>save</span></a></li><li><a href="taoensso.carmine.html#var-scard"><span>scard</span></a></li><li><a href="taoensso.carmine.html#var-script-exists"><span>script-exists</span></a></li><li><a href="taoensso.carmine.html#var-script-flush"><span>script-flush</span></a></li><li><a href="taoensso.carmine.html#var-script-kill"><span>script-kill</span></a></li><li><a href="taoensso.carmine.html#var-script-load"><span>script-load</span></a></li><li><a href="taoensso.carmine.html#var-sdiff"><span>sdiff</span></a></li><li><a href="taoensso.carmine.html#var-sdiffstore"><span>sdiffstore</span></a></li><li><a href="taoensso.carmine.html#var-select"><span>select</span></a></li><li><a href="taoensso.carmine.html#var-serialize"><span>serialize</span></a></li><li><a href="taoensso.carmine.html#var-set"><span>set</span></a></li><li><a href="taoensso.carmine.html#var-setbit"><span>setbit</span></a></li><li><a href="taoensso.carmine.html#var-setex"><span>setex</span></a></li><li><a href="taoensso.carmine.html#var-setnx"><span>setnx</span></a></li><li><a href="taoensso.carmine.html#var-setrange"><span>setrange</span></a></li><li><a href="taoensso.carmine.html#var-shutdown"><span>shutdown</span></a></li><li><a href="taoensso.carmine.html#var-sinter"><span>sinter</span></a></li><li><a href="taoensso.carmine.html#var-sinterstore"><span>sinterstore</span></a></li><li><a href="taoensso.carmine.html#var-sismember"><span>sismember</span></a></li><li><a href="taoensso.carmine.html#var-skip-replies"><span>skip-replies</span></a></li><li><a href="taoensso.carmine.html#var-slaveof"><span>slaveof</span></a></li><li><a href="taoensso.carmine.html#var-slowlog"><span>slowlog</span></a></li><li><a href="taoensso.carmine.html#var-smembers"><span>smembers</span></a></li><li><a href="taoensso.carmine.html#var-smove"><span>smove</span></a></li><li><a href="taoensso.carmine.html#var-sort"><span>sort</span></a></li><li><a href="taoensso.carmine.html#var-sort*"><span>sort*</span></a></li><li><a href="taoensso.carmine.html#var-spop"><span>spop</span></a></li><li><a href="taoensso.carmine.html#var-srandmember"><span>srandmember</span></a></li><li><a href="taoensso.carmine.html#var-srem"><span>srem</span></a></li><li><a href="taoensso.carmine.html#var-strlen"><span>strlen</span></a></li><li><a href="taoensso.carmine.html#var-subscribe"><span>subscribe</span></a></li><li><a href="taoensso.carmine.html#var-sunion"><span>sunion</span></a></li><li><a href="taoensso.carmine.html#var-sunionstore"><span>sunionstore</span></a></li><li><a href="taoensso.carmine.html#var-sync"><span>sync</span></a></li><li><a href="taoensso.carmine.html#var-time"><span>time</span></a></li><li><a href="taoensso.carmine.html#var-ttl"><span>ttl</span></a></li><li><a href="taoensso.carmine.html#var-type"><span>type</span></a></li><li><a href="taoensso.carmine.html#var-unsubscribe"><span>unsubscribe</span></a></li><li><a href="taoensso.carmine.html#var-unwatch"><span>unwatch</span></a></li><li><a href="taoensso.carmine.html#var-watch"><span>watch</span></a></li><li><a href="taoensso.carmine.html#var-with-conn"><span>with-conn</span></a></li><li><a href="taoensso.carmine.html#var-with-mparser"><span>with-mparser</span></a></li><li><a href="taoensso.carmine.html#var-with-new-listener"><span>with-new-listener</span></a></li><li><a href="taoensso.carmine.html#var-with-new-pubsub-listener"><span>with-new-pubsub-listener</span></a></li><li><a href="taoensso.carmine.html#var-with-open-listener"><span>with-open-listener</span></a></li><li><a href="taoensso.carmine.html#var-with-parser"><span>with-parser</span></a></li><li><a href="taoensso.carmine.html#var-with-replies"><span>with-replies</span></a></li><li><a href="taoensso.carmine.html#var-with-reply"><span>with-reply</span></a></li><li><a href="taoensso.carmine.html#var-zadd"><span>zadd</span></a></li><li><a href="taoensso.carmine.html#var-zcard"><span>zcard</span></a></li><li><a href="taoensso.carmine.html#var-zcount"><span>zcount</span></a></li><li><a href="taoensso.carmine.html#var-zincrby"><span>zincrby</span></a></li><li><a href="taoensso.carmine.html#var-zinterstore"><span>zinterstore</span></a></li><li><a href="taoensso.carmine.html#var-zinterstore*"><span>zinterstore*</span></a></li><li><a href="taoensso.carmine.html#var-zrange"><span>zrange</span></a></li><li><a href="taoensso.carmine.html#var-zrangebyscore"><span>zrangebyscore</span></a></li><li><a href="taoensso.carmine.html#var-zrank"><span>zrank</span></a></li><li><a href="taoensso.carmine.html#var-zrem"><span>zrem</span></a></li><li><a href="taoensso.carmine.html#var-zremrangebyrank"><span>zremrangebyrank</span></a></li><li><a href="taoensso.carmine.html#var-zremrangebyscore"><span>zremrangebyscore</span></a></li><li><a href="taoensso.carmine.html#var-zrevrange"><span>zrevrange</span></a></li><li><a href="taoensso.carmine.html#var-zrevrangebyscore"><span>zrevrangebyscore</span></a></li><li><a href="taoensso.carmine.html#var-zrevrank"><span>zrevrank</span></a></li><li><a href="taoensso.carmine.html#var-zscore"><span>zscore</span></a></li><li><a href="taoensso.carmine.html#var-zunionstore"><span>zunionstore</span></a></li><li><a href="taoensso.carmine.html#var-zunionstore*"><span>zunionstore*</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.commands.html"><span>taoensso.carmine.commands</span></a></h3><pre class="doc">Define an appropriate function for EVERY Redis command. This is done by
parsing the official Redis command reference (JSON) which includes up-to-date
docstrings, argument specs, etc. This awesome approach was adapted from
labs-redis-clojure.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.commands.html#var-defcommand"><span>defcommand</span></a></li><li><a href="taoensso.carmine.commands.html#var-defcommands"><span>defcommands</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.connections.html"><span>taoensso.carmine.connections</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.connections.html#var--%3EConnection"><span>-&gt;Connection</span></a></li><li><a href="taoensso.carmine.connections.html#var--%3EConnectionPool"><span>-&gt;ConnectionPool</span></a></li><li><a href="taoensso.carmine.connections.html#var--%3ENonPooledConnectionPool"><span>-&gt;NonPooledConnectionPool</span></a></li><li><a href="taoensso.carmine.connections.html#var-make-new-connection"><span>make-new-connection</span></a></li><li><a href="taoensso.carmine.connections.html#var-map-%3EConnection"><span>map-&gt;Connection</span></a></li><li><a href="taoensso.carmine.connections.html#var-map-%3EConnectionPool"><span>map-&gt;ConnectionPool</span></a></li><li><a href="taoensso.carmine.connections.html#var-map-%3ENonPooledConnectionPool"><span>map-&gt;NonPooledConnectionPool</span></a></li><li><a href="taoensso.carmine.connections.html#var-non-pooled-connection-pool"><span>non-pooled-connection-pool</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.locks.html"><span>taoensso.carmine.locks</span></a></h3><pre class="doc">Alpha - subject to change.
Distributed lock implementation for Carmine based on work by Ronen Narkis
and Josiah Carlson.

Redis keys:
  * carmine:lock:&lt;lock-name&gt; -&gt; ttl str, lock owner's UUID

Ref. http://goo.gl/5UalQ for implementation details.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.locks.html#var-acquire-lock"><span>acquire-lock</span></a></li><li><a href="taoensso.carmine.locks.html#var-config"><span>config</span></a></li><li><a href="taoensso.carmine.locks.html#var-release-lock"><span>release-lock</span></a></li><li><a href="taoensso.carmine.locks.html#var-with-lock"><span>with-lock</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.message-queue.html"><span>taoensso.carmine.message-queue</span></a></h3><pre class="doc">Alpha - subject to change.
Carmine-backed Clojure message queue. All heavy lifting by Redis (2.6+).
Simple implementation. Very simple API. Reliable. Fast.

Redis keys:
  * carmine:mq:&lt;qname&gt;:messages      -&gt; hash, {id content}
  * carmine:mq:&lt;qname&gt;:locks         -&gt; hash, {id lock-acquired-time}
  * carmine:mq:&lt;qname&gt;:id-circle     -&gt; list, rotating list of ids
  * carmine:mq:&lt;qname&gt;:recently-done -&gt; set, used for efficient id removal from
                                        circle
  * carmine:mq:&lt;qname&gt;:backoff?      -&gt; ttl flag, used for queue-wide (every-worker)
                                        polling backoff

Ref. http://antirez.com/post/250 for implementation details.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.message-queue.html#var--%3EDequeueWorker"><span>-&gt;DequeueWorker</span></a></li><li><a href="taoensso.carmine.message-queue.html#var-dequeue-1"><span>dequeue-1</span></a></li><li><a href="taoensso.carmine.message-queue.html#var-enqueue"><span>enqueue</span></a></li><li><a href="taoensso.carmine.message-queue.html#var-make-dequeue-worker"><span>make-dequeue-worker</span></a></li><li><a href="taoensso.carmine.message-queue.html#var-map-%3EDequeueWorker"><span>map-&gt;DequeueWorker</span></a></li><li><a href="taoensso.carmine.message-queue.html#var-qkey"><span>qkey</span></a></li><li><a href="taoensso.carmine.message-queue.html#var-status"><span>status</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.protocol.html"><span>taoensso.carmine.protocol</span></a></h3><pre class="doc">Facilities for actually communicating with Redis server using its
request/response protocol. Originally adapted from Accession.

Ref: http://redis.io/topics/protocol</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.protocol.html#var--%3EContext"><span>-&gt;Context</span></a></li><li><a href="taoensso.carmine.protocol.html#var--%3ESerialized"><span>-&gt;Serialized</span></a></li><li><a href="taoensso.carmine.protocol.html#var-bytestring"><span>bytestring</span></a></li><li><a href="taoensso.carmine.protocol.html#var-get-basic-reply%21"><span>get-basic-reply!</span></a></li><li><a href="taoensso.carmine.protocol.html#var-get-replies%21"><span>get-replies!</span></a></li><li><a href="taoensso.carmine.protocol.html#var-map-%3EContext"><span>map-&gt;Context</span></a></li><li><a href="taoensso.carmine.protocol.html#var-send-arg"><span>send-arg</span></a></li><li><a href="taoensso.carmine.protocol.html#var-send-request%21"><span>send-request!</span></a></li><li><a href="taoensso.carmine.protocol.html#var-with-context"><span>with-context</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.ring.html"><span>taoensso.carmine.ring</span></a></h3><pre class="doc">Carmine-backed Ring session store. Adapted from clj-redis-session.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.ring.html#var--%3ECarmineSessionStore"><span>-&gt;CarmineSessionStore</span></a></li><li><a href="taoensso.carmine.ring.html#var-make-carmine-store"><span>make-carmine-store</span></a></li><li><a href="taoensso.carmine.ring.html#var-map-%3ECarmineSessionStore"><span>map-&gt;CarmineSessionStore</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.carmine.utils.html"><span>taoensso.carmine.utils</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.carmine.utils.html#var-bench"><span>bench</span></a></li><li><a href="taoensso.carmine.utils.html#var-declare-remote"><span>declare-remote</span></a></li><li><a href="taoensso.carmine.utils.html#var-defonce*"><span>defonce*</span></a></li><li><a href="taoensso.carmine.utils.html#var-keyname"><span>keyname</span></a></li><li><a href="taoensso.carmine.utils.html#var-repeatedly*"><span>repeatedly*</span></a></li><li><a href="taoensso.carmine.utils.html#var-time-ns"><span>time-ns</span></a></li><li><a href="taoensso.carmine.utils.html#var-version-compare"><span>version-compare</span></a></li></ul></div></div></div></body></html>